{
    "app-id": "org.zrythm.Zrythm",
    "runtime": "org.gnome.Platform",
    "runtime-version": "41",
    "sdk": "org.gnome.Sdk",
    "command": "zrythm",
    "rename-icon": "zrythm",
    "copy-icon": true,
    "finish-args": [
        "--share=ipc",
        "--device=dri",
        "--socket=fallback-x11",
        "--socket=wayland",
        "--socket=pulseaudio",
        
        "--share=network",
                
        "--filesystem=xdg-run/pipewire-0",
        
        "--system-talk-name=org.freedesktop.RealtimeKit1",
        "--socket=system-bus",
        
        
        "--env=LV2_PATH=/app/lib/lv2:/app/extensions/Plugins/lv2"
        
    ],
    "cleanup": [
        "/include",
        "/lib/pkgconfig",
        "/man",
        "/share/doc",
        "/share/gtk-doc",
        "/share/man",
        "/share/pkgconfig",
        "*.la",
        "*.a"
    ],
    "modules": [
        "shared-modules/linux-audio/lv2.json",
        {
            "name": "libatomic_ops",
            "buildsystem": "autotools",
            "config-opts": [],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/ivmai/libatomic_ops/releases/download/v7.6.10/libatomic_ops-7.6.10.tar.gz",
                    "sha256": "587edf60817f56daf1e1ab38a4b3c729b8e846ff67b4f62a6157183708f099af"
                }
            ],
            "cleanup": [
                "*.a",
                "*.la",
                "/include",
                "/share/info",
                "/share/man",
                "/share/aclocal",
                "/lib/pkgconfig"
            ]
        },
        {
            "name": "bdwgc",
            "buildsystem": "autotools",
            "config-opts": [],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/ivmai/bdwgc.git",
                    "tag": "v7.6.6"
                }
            ],
            "cleanup": [
                "*.a",
                "*.la",
                "/include",
                "/share/info",
                "/share/doc",
                "/lib/pkgconfig"
            ]
        },
        {
            "name": "guile",
            "cleanup": [
                "/bin",
                "/lib/libguile-3.0.so.1.2.0-gdb.scm"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://ftp.gnu.org/gnu/guile/guile-3.0.4.tar.xz",
                    "sha256": "6b7947dc2e3d115983846a268b8f5753c12fd5547e42fbf2b97d75a3b79f0d31"
                }
            ]
        },
        {
            "name": "libaudec",
            "buildsystem": "meson",
            "sources": [
                {
                    "type": "git",
                    "url": "https://git.sr.ht/~alextee/libaudec",
                    "commit": "46f5aa04316f94bfbfa90d6b3514df54e90f0602"
                }
            ]
        },
        {
            "name": "serd",
            "buildsystem": "simple",
            "build-commands": [
                "python3 ./waf configure --prefix=$FLATPAK_DEST",
                "python3 ./waf build -j $FLATPAK_BUILDER_N_JOBS",
                "python3 ./waf install"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://ardour.org/files/deps/serd-0.30.11-g36f1cecc.tar.bz2",
                    "sha256": "76afe98511351c3c50010d9f145cfd1f10b54a9565cb7889f0ca5158da806598"
                }
            ],
            "post-install": [
                "install -Dm644 -t /app/share/licenses/serd COPYING"
            ],
            "cleanup": [
                "/bin",
                "/include",
                "/lib/pkgconfig",
                "/share/man"
            ]
        },
        {
            "name": "sord",
            "buildsystem": "simple",
            "build-commands": [
                "python3 ./waf configure --prefix=$FLATPAK_DEST",
                "python3 ./waf build -j $FLATPAK_BUILDER_N_JOBS",
                "python3 ./waf install"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://ardour.org/files/deps/sord-0.16.9-gd2efdb2.tar.bz2",
                    "sha256": "40168fc08f3b45fe2cc978bf3a2b14607dc8be2c59598bcac1523cbe59b9ba1a"
                }
            ],
            "post-install": [
                "install -Dm644 -t /app/share/licenses/sord COPYING"
            ],
            "cleanup": [
                "/bin",
                "/include",
                "/lib/pkgconfig",
                "/share/man"
            ]
        },
        {
            "name": "sratom",
            "buildsystem": "simple",
            "build-commands": [
                "python3 ./waf configure --prefix=$FLATPAK_DEST",
                "python3 ./waf build -j $FLATPAK_BUILDER_N_JOBS",
                "python3 ./waf install"
            ],
            "cleanup": [
                "/include",
                "/lib/pkgconfig"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "http://ardour.org/files/deps/sratom-0.6.8-gc46452c.tar.bz2",
                    "sha256": "9ca25888964d062fe9c7390e23fcb0de215da0f433ce032e8e570ad9bd772ed9"
                }
            ],
            "post-install": [
                "install -Dm644 -t /app/share/licenses/sratom COPYING"
            ]
        },
        "shared-modules/linux-audio/lilv.json",
        {
            "name": "carla",
            "buildsystem": "simple",
            "build-commands": [
                "make PREFIX=/app -j $FLATPAK_BUILDER_N_JOBS",
                "make PREFIX=/app install"
            ],
            "build-options": {
                "arch": {
                    "arm": {
                        "env": {
                            "NOOPT": "true"
                        }
                    },
                    "aarch64": {
                        "env": {
                            "NOOPT": "true"
                        }
                    }
                }
            },
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/falkTX/Carla/archive/v2.4.1.tar.gz",
                    "sha256": "bbb188a672ea8871b11648d36770ba013497d03407ca9c73ed68429016f7536f"
                }
            ]
        },
        {
            "name": "xxHash",
            "buildsystem": "simple",
            "build-commands": [
                "make PREFIX=/app -j $FLATPAK_BUILDER_N_JOBS",
                "make PREFIX=/app install"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/Cyan4973/xxHash/",
                    "commit": "b1a61dff654af43552b5ee05c737b6fd2a0ee14b"
                }
            ]
        },
        {
            "name": "libadwaita",
            "buildsystem": "meson",
            "config-opts": [
                "-Dintrospection=disabled",
                "-Dgtk_doc=false",
                "-Dtests=false",
                "-Dexamples=false",
                "-Dvapi=false"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://gitlab.gnome.org/GNOME/libadwaita.git",
                    "tag": "1.0.1",
                    "commit": "b274a0c32c51a92692e3b282f04e88f033ba73b1"
                }
            ],
            "cleanup": [
                "/include",
                "/lib/pkgconfig"
            ],
            "modules": [
                {
                    "name": "pango",
                    "buildsystem": "meson",
                    "config-opts": [
                        "-Dtests=false",
                        "-Dbuild-documentation=false"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://gitlab.gnome.org/GNOME/pango.git",
                            "tag": "1.50.3",
                            "commit": "26aadb2508f9022cbfc72e73b558c6791f5d46d9"
                        }
                    ],
                    "cleanup": [
                        "/include",
                        "/lib/debug",
                        "/bin/pango-*"
                    ]
                },
                {
                    "name": "libsass",
                    "buildsystem": "meson",
                    "cleanup": [
                        "*"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://github.com/lazka/libsass.git",
                            "branch": "meson",
                            "commit": "302397c0c8ae2d7ab02f45ea461c2c3d768f248e"
                        }
                    ]
                },
                {
                    "name": "sassc",
                    "buildsystem": "meson",
                    "cleanup": [
                        "*"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://github.com/lazka/sassc.git",
                            "branch": "meson",
                            "commit": "82803377c33247265d779af034eceb5949e78354"
                        }
                    ]
                },
                {
                    "name": "gtk",
                    "buildsystem": "meson",
                    "config-opts": [
                        "-Dbuild-documentation=false",
                        "-Dintrospection=disabled",
                        "-Dgtk_doc=false",
                        "-Dtests=false",
                        "-Dexamples=false",
                        "-Dvapi=false"
                    ],
                    "sources": [
                        {
                            "type": "git",
                            "url": "https://gitlab.gnome.org/GNOME/gtk.git",
                            "tag": "4.6.0",
                            "commit": "70cb61fb7104c76a15bc6494a10e6ff1d470f6d8"
                        }
                    ],
                    "cleanup": [
                        "/include",
                        "/lib/debug",
                        "/bin/gtk4-*"
                    ]
                }
            ]
        },
        {
            "name": "libyaml",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://pyyaml.org/download/libyaml/yaml-0.2.1.tar.gz",
                    "md5": "72724b9736923c517e5a8fc6757ef03d"
                }
            ]
        },
        {
            "name": "libcyaml",
            "buildsystem": "simple",
            "build-commands": [
                "make PREFIX=/app -j $FLATPAK_BUILDER_N_JOBS",
                "make PREFIX=/app install"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/tlsa/libcyaml/",
                    "commit": "5206ecef6fac7fe8e07d66d36403f64ae1012433"
                }
            ]
        },
        {
            "name": "backtrace",
            "buildsystem": "autotools",
            "build-options" : {
                "env": {
                    "CFLAGS": "-fPIC"
                }
            },
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/ianlancetaylor/libbacktrace",
                    "commit": "d0f5e95a87a4d3e0a1ed6c069b5dae7cbab3ed2a"
                }
            ]
        },
        {
            "name": "vamp-plugin-sdk",
            "sources": [
                {
                    "type": "archive",
                    "url": "https://archive.org/download/vamp-plugin-sdk-2.8.0-source/vamp-plugin-sdk-2.8.0.tar.gz",
                    "sha256": "dcc96ae894795822398789f251c2c7effa602fc60e9dd6c7a5c5d2e7a513526c"
                }
            ],
            "post-install": [
                "install -Dm644 -t /app/share/licenses/vamp-plugin-sdk COPYING"
            ],
            "cleanup": [
                "/bin",
                "/include",
                "/lib/pkgconfig"
            ]
        },
        {
            "name": "rubberband",
            "build-options": {
                "env": {
                    "Vamp_CFLAGS": " ",
                    "Vamp_LIBS": " "
                }
            },
            "sources": [
                {
                    "type": "archive",
                    "url": "http://code.breakfastquay.com/attachments/download/34/rubberband-1.8.1.tar.bz2",
                    "sha256": "ff0c63b0b5ce41f937a8a3bc560f27918c5fe0b90c6bc1cb70829b86ada82b75"
                }
            ],
            "post-install": [
                "install -Dm644 -t /app/share/licenses/rubberband COPYING"
            ],
            "cleanup": [
                "/bin",
                "/include",
                "/share/ladspa",
                "*.a",
                "*.so"
            ]
        },
        "shared-modules/linux-audio/fftw3f.json",
        {
            "name": "reproc",
            "buildsystem": "cmake",
            "build-options": {
                "env": {
                    "BUILD_SHARED_LIBS": "ON",
                    "REPROC_WARNINGS": "ON",
                    "REPROC_WARNINGS_AS_ERRORS": "ON",
                    "CFLAGS": "-fPIC"
                }
            },
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/DaanDeMeyer/reproc",
                    "commit": "8aea3aef64c37a7ed0db759a7128a80c2540c808",
                    "tag": "v14.2.4"
                }
            ]
        },
        {
            "name": "extra-cmake-modules",
            "buildsystem": "cmake-ninja",
            "cleanup": [
                "*"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://github.com/KDE/extra-cmake-modules/archive/v5.90.0.tar.gz",
                    "sha256": "d1c4c11848651f1d2ef7baa1ac30b44397a93ca35864395e44a11e6ec753d2fd"
                }
            ]
        },
        {
            "name": "python3-lxml",
            "buildsystem": "simple",
            "build-commands": [
                "pip3 install --ignore-installed --exists-action=i --no-index --find-links=\"file://${PWD}\" --prefix=${FLATPAK_DEST} \"lxml\""
            ],
            "sources": [
                {
                    "type": "file",
                    "url": "https://files.pythonhosted.org/packages/e5/21/a2e4517e3d216f0051687eea3d3317557bde68736f038a3b105ac3809247/lxml-4.6.3.tar.gz",
                    "sha256": "39b78571b3b30645ac77b95f7c69d1bffc4cf8c3b157c435a34da72e78c82468"
                }
            ]
        },
        {
            "name": "breeze-icons",
            "builddir": true,
            "buildsystem": "simple",
            "build-commands": [
                "mkdir -p /app/share/icons/breeze-dark",
                "cp -r icons-dark/* /app/share/icons/breeze-dark"
            ],
            "sources": [
                {
                    "type": "git",
                    "url": "https://github.com/KDE/breeze-icons",
                    "commit": "c8ca52623d49f77fe32dc1bdb400fa16bc4afb06",
                    "tag": "v5.90.0"
                }
            ]
        },
        {
            "name": "gtksourceview",
            "buildsystem": "meson",
            "build-options": {
                "env": {
                    "LIBRARY_PATH": "/app/lib"
                }
            },
            "config-opts": [
                "-Dvapi=false",
                "-Dintrospection=disabled"
            ],
            "sources": [
                {
                    "type": "archive",
                    "url": "https://download.gnome.org/sources/gtksourceview/5.2/gtksourceview-5.2.0.tar.xz",
                    "sha256": "c9b34fa02654f56ce22fa08827d89db4ba81631b2e6d7d31ea65d13c729430e9"
                }
            ]
        },
        "shared-modules/linux-audio/jack2.json",
        {
            "name": "zrythm",
            "builddir": true,
            "buildsystem": "meson",
            "config-opts": [
                "-Dfor_flathub=true"
            ],
            "build-options": {
                "env": {
                    "LIBRARY_PATH": "/app/lib",
                    "CFLAGS": "-fPIC"
                }
            },
            "sources": [
                {
                    "type": "git",
                    "url": "https://git.sr.ht/~alextee/zrythm",
                    "commit": "90034e05f1288bbd52053c992b3125917c15159b"
                }
            ]
        }
    ]
}
